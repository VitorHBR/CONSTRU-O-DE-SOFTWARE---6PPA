
<script src="/js/Relatorio/listar.js"></script>

<div>
  <h1>Relatorios</h1>
  <div>
    <nav class="navbar bg-body-tertiary">
      <div class="container-fluid">
        <form class="d-flex" role="search" method="post" action="/relatorio/buscarrelatorio">
          <input class="form-control me-2" type="search" placeholder="Procurar" aria-label="Search" name="busca">
          <button class="btn btn-outline-success" type="submit">Buscar</button>
        </form>
        
      </div>
    </nav>
    
  </div>
  <div class="table-responsive" style="margin-top: 15px;">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>CÃ³digo</th>
          <th>Data</th>
          <th>Valor</th>
          <th>Forma Pagamento</th>
          <th>Cliente</th>
          <th>Funcionario</th>
        </tr>
      </thead>
      <tbody>
        <% lista.map(function(value, index) { %>
          <tr>
            <td id="idVenda">
              <%= value.idVenda %>
            </td>
            <td id="data_hora">
             <%= value.data_hora %>
            </td>
            <td id="valor_total">
              <%= value.valor_total %>
            </td>
            <td id="forma_pagamento">
              <%= value.forma_pagamento %>
            </td>
            <td id="cliente">
              <%= value.cliente %>
            </td>
            <td id="funcionario">
              <%= value.funcionario %>
            </td>
            <td>
              <div class="d-flex">
               
                <!--espaco para botao de relatorio expandido-->       
                <button onclick="listarrelatorio('<%= value.idVenda %>')" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-spreadsheet" viewBox="0 0 16 16">
                    <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V9H3V2a1 1 0 0 1 1-1h5.5v2zM3 12v-2h2v2H3zm0 1h2v2H4a1 1 0 0 1-1-1v-1zm3 2v-2h3v2H6zm4 0v-2h3v1a1 1 0 0 1-1 1h-2zm3-3h-3v-2h3v2zm-7 0v-2h3v2H6z"/>
                  </svg>
                </button>

                <!-- Modal -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Lista Completa</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <!-- espaco retorno lista relatorio-->
                        <ol class="list-group list-group-numbered" id="listarelatorioexpandido">
                         <!--retorna lista-->
                          
                        </ol>
                        
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                        <button type="button" onclick="exportexcel()" class="btn btn-primary">Baixar Excel</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          <% }) %>
      </tbody>
    </table>
  </div>
</div>